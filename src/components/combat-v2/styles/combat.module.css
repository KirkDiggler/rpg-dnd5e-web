/**
 * Combat v2 CSS Module
 * 
 * This module provides bulletproof styling for combat UI components.
 * All z-index values are explicit and well-documented to prevent layering issues.
 * 
 * Z-Index Management:
 * - Modal backdrop: 1000
 * - Modal content: 1010
 * - Combat overlays: 2000-2999
 * - Action panel: 2500 (always visible over game content but under modals)
 * - Debug overlays: 9999 (development only)
 */

/* Action Panel - Fixed bottom overlay */
.actionPanel {
  /* Positioning - Fixed to viewport bottom */
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;

  /* Layout - Explicit dimensions */
  min-height: 180px;
  max-height: 240px;
  height: auto;

  /* Z-index - Always above game content, below modals */
  z-index: 2500;

  /* Background - Solid with fallback */
  background-color: #1e293b; /* slate-800 fallback */
  background-color: var(--bg-secondary, #1e293b);

  /* Border - Visual separation */
  border-top: 2px solid #475569; /* slate-600 fallback */
  border-top: 2px solid var(--border-color, #475569);

  /* Shadow - Depth visual cue */
  box-shadow: 0 -8px 25px -5px rgba(0, 0, 0, 0.3);

  /* Interaction - Ensure clicks work */
  pointer-events: auto;

  /* Animation - Smooth entry */
  transform: translateY(0);
  transition: transform 0.3s ease-in-out;
}

/* Action panel slide-in animation */
.actionPanel.entering {
  transform: translateY(100%);
}

.actionPanel.entered {
  transform: translateY(0);
}

/* Container - Content wrapper with max-width */
.actionPanelContainer {
  max-width: 1200px;
  margin: 0 auto;
  padding: 16px 20px;
  height: 100%;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

/* Header section */
.actionPanelHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 8px;
}

.characterName {
  font-size: 1.25rem;
  font-weight: 700;
  color: #f1f5f9; /* slate-100 fallback */
  color: var(--text-primary, #f1f5f9);
  margin: 0;
}

.roundBadge {
  font-size: 0.875rem;
  padding: 4px 12px;
  border-radius: 6px;
  background-color: #3b82f6; /* blue-500 fallback */
  background-color: var(--accent-primary, #3b82f6);
  color: white;
  font-weight: 500;
}

.characterStats {
  display: flex;
  gap: 16px;
  font-size: 0.875rem;
  color: #94a3b8; /* slate-400 fallback */
  color: var(--text-muted, #94a3b8);
}

.statValue {
  color: #f1f5f9; /* slate-100 fallback */
  color: var(--text-primary, #f1f5f9);
  font-weight: 600;
}

/* Resources section */
.resourcesSection {
  display: flex;
  gap: 24px;
  align-items: center;
  margin-bottom: 12px;
}

.resourceItem {
  display: flex;
  align-items: center;
  gap: 8px;
}

.resourceLabel {
  font-size: 0.875rem;
  color: #94a3b8; /* slate-400 fallback */
  color: var(--text-muted, #94a3b8);
  white-space: nowrap;
}

.movementBar {
  width: 80px;
  height: 6px;
  background-color: #374151; /* gray-700 fallback */
  background-color: var(--bg-primary, #374151);
  border-radius: 3px;
  overflow: hidden;
}

.movementBarFill {
  height: 100%;
  border-radius: 3px;
  transition: width 0.3s ease;
}

.movementBarFill.hasMovement {
  background-color: #10b981; /* emerald-500 */
}

.movementBarFill.noMovement {
  background-color: #6b7280; /* gray-500 */
}

.movementText {
  font-size: 0.875rem;
  color: #f1f5f9; /* slate-100 fallback */
  color: var(--text-primary, #f1f5f9);
  font-weight: 500;
  min-width: 32px;
}

.statusIcon {
  width: 28px;
  height: 28px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.75rem;
  font-weight: 700;
}

.statusIcon.available {
  background-color: #10b981; /* emerald-500 */
  color: white;
}

.statusIcon.used {
  background-color: #6b7280; /* gray-500 */
  color: #9ca3af; /* gray-400 */
}

/* Actions section */
.actionsSection {
  display: flex;
  gap: 12px;
  align-items: center;
  flex-wrap: wrap;
}

.actionButton {
  padding: 8px 16px;
  border-radius: 8px;
  font-size: 0.875rem;
  font-weight: 600;
  border: none;
  cursor: pointer;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  gap: 6px;
  white-space: nowrap;
}

.actionButton:hover:not(:disabled) {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.actionButton:active:not(:disabled) {
  transform: translateY(0);
}

.actionButton:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.actionButton.move {
  background-color: #3b82f6; /* blue-500 */
  color: white;
}

.actionButton.move:hover:not(:disabled) {
  background-color: #2563eb; /* blue-600 */
}

.actionButton.move.active {
  background-color: #1d4ed8; /* blue-700 */
}

.actionButton.attack {
  background-color: #dc2626; /* red-600 */
  color: white;
}

.actionButton.attack:hover:not(:disabled) {
  background-color: #b91c1c; /* red-700 */
}

.actionButton.spell {
  background-color: #7c3aed; /* violet-600 */
  color: white;
}

.actionButton.spell:hover:not(:disabled) {
  background-color: #6d28d9; /* violet-700 */
}

.actionButton.ability {
  background-color: #ea580c; /* orange-600 */
  color: white;
}

.actionButton.ability:hover:not(:disabled) {
  background-color: #c2410c; /* orange-700 */
}

.actionButton.endTurn {
  background-color: #16a34a; /* green-600 */
  color: white;
  margin-left: auto;
  padding: 10px 24px;
}

.actionButton.endTurn:hover:not(:disabled) {
  background-color: #15803d; /* green-700 */
}

.actionButton.disabled {
  background-color: #6b7280; /* gray-500 */
  color: #9ca3af; /* gray-400 */
}

/* Debug mode - bright colors for testing visibility */
.actionPanel.debug {
  background-color: #ff00ff; /* magenta */
  border-top: 5px solid #ffff00; /* yellow */
}

.actionPanel.debug .characterName {
  color: #000000;
  text-shadow: 1px 1px 0 #ffffff;
}

.actionPanel.debug .actionButton {
  border: 2px solid #00ff00; /* green border */
}

.actionPanel.debug .statValue {
  color: #000000;
  font-weight: 900;
}

.actionPanel.debug .resourceLabel {
  color: #000000;
  font-weight: bold;
}

/* ===================================== */
/* Character Info Section */
/* ===================================== */

/* Character info section - uses unified compact panel style */
.characterInfoSection {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 10px;
  background-color: transparent;
  flex: 1;
  flex-wrap: wrap;
}

/* Portrait Section */
.characterPortraitSection {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-shrink: 0;
}

.characterPortrait {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: linear-gradient(
    135deg,
    #3b82f6 0%,
    #1e40af 100%
  ); /* blue gradient */
  display: flex;
  align-items: center;
  justify-content: center;
  border: 2px solid #60a5fa; /* blue-400 */
}

.portraitEmoji {
  font-size: 1rem;
}

.characterNameSection {
  display: flex;
  flex-direction: column;
}

.characterDisplayName {
  font-size: 1rem;
  font-weight: 600;
  color: #f1f5f9; /* slate-100 fallback */
  color: var(--text-primary, #f1f5f9);
  margin: 0;
  line-height: 1.2;
}

/* HP Section - compact inline */
.hpSection {
  display: flex;
  align-items: center;
  gap: 6px;
  min-width: 100px;
}

.hpLabelRow {
  display: flex;
  align-items: center;
  gap: 4px;
}

.hpLabel {
  font-size: 0.625rem;
  font-weight: 600;
  color: #94a3b8;
  text-transform: uppercase;
}

.hpValues {
  font-size: 0.75rem;
  font-weight: 700;
  color: #f1f5f9;
}

.hpBarContainer {
  flex: 1;
  height: 4px;
  background-color: #334155;
  border-radius: 2px;
  overflow: hidden;
  min-width: 60px;
}

.hpBarFill {
  height: 100%;
  border-radius: 2px;
  transition: width 0.2s ease;
}

.tempHpBadge {
  font-size: 0.625rem;
  color: #60a5fa;
  font-weight: 500;
}

/* AC Section - compact inline display */
.acSection {
  display: flex;
  align-items: center;
  gap: 4px;
  flex-shrink: 0;
}

.acIcon {
  font-size: 1rem;
  line-height: 1;
}

.acValue {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
}

.acLabel {
  font-size: 0.625rem;
  font-weight: 600;
  color: #94a3b8; /* slate-400 fallback */
  color: var(--text-muted, #94a3b8);
  text-transform: uppercase;
  letter-spacing: 0.05em;
  line-height: 1;
}

.acNumber {
  font-size: 0.875rem;
  font-weight: 700;
  color: #f1f5f9; /* slate-100 fallback */
  color: var(--text-primary, #f1f5f9);
  line-height: 1;
}

/* Saving Throw Badges */
.savingThrowBadges {
  display: flex;
  gap: 4px;
  margin-left: auto;
}

.savingThrowBadge {
  font-size: 0.625rem;
  font-weight: 600;
  padding: 2px 6px;
  border-radius: 4px;
  background-color: #10b981; /* emerald-500 */
  color: white;
  text-transform: uppercase;
  letter-spacing: 0.02em;
  cursor: default;
}

/* Ability Scores Section */
.abilityScoresSection {
  display: flex;
  gap: 8px;
  flex-shrink: 0;
}

/* Ability score - compact with icon */
.abilityScore {
  display: flex;
  align-items: center;
  gap: 2px;
  cursor: default;
}

.abilityIcon {
  font-size: 0.75rem;
  line-height: 1;
}

.abilityLabel {
  font-size: 0.5rem;
  font-weight: 600;
  color: #94a3b8;
  text-transform: uppercase;
}

.abilityModifier {
  font-size: 0.75rem;
  font-weight: 700;
  color: #f1f5f9;
}

/* Conditions Section - compact badges */
.conditionsSection {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  flex-shrink: 0;
}

.conditionBadge {
  display: flex;
  align-items: center;
  gap: 3px;
  padding: 2px 6px;
  background-color: #7c3aed;
  border-radius: 3px;
  font-size: 0.625rem;
  font-weight: 600;
  color: white;
  cursor: help;
}

.conditionBadge:hover {
  background-color: #6d28d9;
}

.conditionIcon {
  font-size: 0.75rem;
  line-height: 1;
}

.conditionName {
  line-height: 1;
  white-space: nowrap;
}

/* ===================================== */
/* Equipment Display */
/* ===================================== */

.equipmentDisplay {
  display: flex;
  gap: 12px;
  flex-wrap: wrap;
}

/* Compact Equipment Display - Inline horizontal */
.equipmentDisplayCompact {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

/* Compact weapon slot - inline */
.compactWeaponSlot {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 4px 8px;
  background-color: #334155;
  border-radius: 4px;
  border: 1px solid transparent;
  transition: all 0.15s ease;
}

.compactWeaponSlotClickable {
  cursor: pointer;
  border-color: #64748b; /* slate-500 */
}

.compactWeaponSlotClickable:hover {
  border-color: #dc2626; /* red-600 - attack color */
  background-color: #1e293b; /* slate-800 */
  transform: translateY(-1px);
  box-shadow: 0 2px 8px rgba(220, 38, 38, 0.2);
}

.compactWeaponSlotDisabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.compactWeaponSlotEmpty {
  border-style: dashed;
  border-color: #475569; /* slate-600 */
}

.compactWeaponIcon {
  font-size: 0.875rem;
  line-height: 1;
}

.compactWeaponLabel {
  font-size: 0.5rem;
  font-weight: 600;
  color: #94a3b8;
  text-transform: uppercase;
}

.compactWeaponName {
  font-size: 0.75rem;
  font-weight: 600;
  color: #f1f5f9;
}

.compactWeaponDamage {
  font-size: 0.625rem;
  color: #cbd5e1;
  font-weight: 500;
}

/* Weapon Slot */
.weaponSlot {
  display: flex;
  flex-direction: column;
  gap: 6px;
  padding: 10px 12px;
  background-color: #334155; /* slate-700 fallback */
  background-color: var(--bg-tertiary, #334155);
  border-radius: 6px;
  border: 2px solid transparent;
  min-width: 160px;
  flex: 1;
  transition: all 0.2s ease;
}

.weaponSlotClickable {
  cursor: pointer;
  border-color: #64748b; /* slate-500 */
}

.weaponSlotClickable:hover {
  border-color: #dc2626; /* red-600 - attack color */
  background-color: #1e293b; /* slate-800 */
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(220, 38, 38, 0.2);
}

.weaponSlotClickable:active {
  transform: translateY(0);
}

.weaponSlotDisabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.weaponSlotEmpty {
  border-style: dashed;
  border-color: #475569; /* slate-600 */
}

/* Weapon Slot Header */
.weaponSlotHeader {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-bottom: 2px;
}

.weaponSlotIcon {
  font-size: 1.25rem;
  line-height: 1;
  filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.4));
}

.weaponSlotLabel {
  font-size: 0.625rem;
  font-weight: 600;
  color: #94a3b8; /* slate-400 fallback */
  color: var(--text-muted, #94a3b8);
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

/* Weapon Slot Content */
.weaponSlotContent {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.weaponName {
  font-size: 0.875rem;
  font-weight: 600;
  color: #f1f5f9; /* slate-100 fallback */
  color: var(--text-primary, #f1f5f9);
  line-height: 1.2;
}

.weaponDamage {
  font-size: 0.75rem;
  color: #cbd5e1; /* slate-300 */
  font-weight: 500;
  line-height: 1.2;
}

.weaponSlotEmpty {
  font-size: 0.875rem;
  color: #64748b; /* slate-500 */
  font-style: italic;
  line-height: 1.2;
}

/* ===================================== */
/* Action Economy Indicators */
/* ===================================== */

/* Action economy - compact inline display */
.actionEconomySection {
  display: flex;
  align-items: center;
  gap: 12px;
}

/* Action economy item - inline label + indicator */
.actionEconomyItem {
  display: flex;
  align-items: center;
  gap: 4px;
  flex-shrink: 0;
}

.actionEconomyLabel {
  font-size: 0.625rem;
  font-weight: 600;
  color: #94a3b8;
  text-transform: uppercase;
  letter-spacing: 0.02em;
  white-space: nowrap;
}

/* Movement Display - compact inline */
.movementDisplay {
  display: flex;
  align-items: center;
  gap: 6px;
  min-width: 90px;
}

.movementBarContainer {
  flex: 1;
  height: 4px;
  background-color: #334155;
  border-radius: 2px;
  overflow: hidden;
}

.movementBarFill {
  height: 100%;
  border-radius: 2px;
  transition: width 0.2s ease;
}

.movementText {
  font-size: 0.7rem;
  font-weight: 600;
  color: #f1f5f9;
  white-space: nowrap;
}

/* Action Dots - compact indicators */
.actionDot {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  transition: background-color 0.2s ease;
  cursor: help;
}

.actionDotAvailable {
  background-color: #10b981; /* emerald-500 */
}

.actionDotUsed {
  background-color: #334155; /* slate-700 */
  border: 1px solid #475569; /* slate-600 */
}

.actionDotIcon {
  font-size: 0.75rem;
  line-height: 1;
  color: #f1f5f9;
  user-select: none;
}

.actionDotUsed .actionDotIcon {
  color: #64748b; /* slate-500 - dimmed for used state */
}

/* Responsive design - Tablet */
@media (max-width: 1024px) and (min-width: 769px) {
  .characterInfoSection {
    flex-wrap: wrap;
  }

  .hpSection {
    flex: 1 1 200px;
  }

  .conditionsSection {
    flex: 1 1 100%;
    justify-content: flex-start;
  }

  .dynamicActionButtons {
    gap: 10px;
  }

  .dynamicActionButton {
    padding: 10px 14px;
    font-size: 0.8125rem;
  }
}

/* Responsive design - Mobile */
@media (max-width: 768px) {
  .actionPanelContainer {
    padding: 12px 16px;
  }

  .actionPanelHeader {
    flex-direction: column;
    align-items: flex-start;
    gap: 8px;
  }

  .characterStats {
    align-self: flex-end;
  }

  .resourcesSection {
    flex-wrap: wrap;
    gap: 16px;
  }

  .actionsSection {
    justify-content: center;
  }

  .actionButton.endTurn {
    margin-left: 0;
    width: 100%;
    justify-content: center;
  }

  /* Character Info Section - Stack vertically on mobile */
  .characterInfoSection {
    flex-direction: column;
    align-items: stretch;
    gap: 12px;
  }

  .characterPortraitSection {
    justify-content: center;
  }

  .hpSection {
    min-width: unset;
  }

  .conditionsSection {
    justify-content: center;
  }

  /* Equipment Display - Stack on mobile */
  .equipmentDisplay {
    flex-direction: column;
    gap: 16px; /* Increased spacing for easier touch targeting */
  }

  .weaponSlot {
    min-width: unset;
    /* Ensure adequate touch target size for weapon slots */
    min-height: 64px;
    padding: 12px 14px;
  }

  /* Action Economy - Wrap on mobile */
  .actionEconomySection {
    flex-wrap: wrap;
    justify-content: center;
    gap: 16px;
  }

  .movementDisplay {
    min-width: 80px;
  }
}

/* ===================================== */
/* Dynamic Action Buttons */
/* ===================================== */

.dynamicActionButtons {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  align-items: center;
}

.dynamicActionButton {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 6px 10px;
  border-radius: 6px;
  font-size: 0.75rem;
  font-weight: 600;
  border: 1px solid transparent;
  cursor: pointer;
  transition: all 0.2s ease;
  white-space: nowrap;
  background-color: #334155; /* slate-700 fallback */
  background-color: var(--bg-tertiary, #334155);
  color: #f1f5f9; /* slate-100 fallback */
  color: var(--text-primary, #f1f5f9);
}

.dynamicActionButton:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
  background-color: #475569; /* slate-600 */
}

.dynamicActionButton:active:not(:disabled) {
  transform: translateY(0);
}

.dynamicActionButton:disabled {
  opacity: 0.4;
  cursor: not-allowed;
  transform: none;
}

.actionButtonIcon {
  font-size: 1rem;
  line-height: 1;
}

.actionButtonLabel {
  line-height: 1;
}

/* Active state for toggleable abilities (e.g., Rage) */
.actionButtonActive {
  border-color: #fbbf24; /* amber-400 */
  background-color: #92400e; /* amber-900 */
  box-shadow: 0 0 12px rgba(251, 191, 36, 0.4);
}

.actionButtonActive:hover:not(:disabled) {
  background-color: #78350f; /* amber-950 */
  border-color: #fcd34d; /* amber-300 */
}

/* Disabled state */
.actionButtonDisabled {
  background-color: #1e293b; /* slate-800 */
  color: #64748b; /* slate-500 */
}

/* Action-specific button colors */
.actionButtonAttack {
  background-color: #dc2626; /* red-600 */
  color: white;
}

.actionButtonAttack:hover:not(:disabled) {
  background-color: #b91c1c; /* red-700 */
}

.actionButtonMove {
  background-color: #3b82f6; /* blue-500 */
  color: white;
}

.actionButtonMove:hover:not(:disabled) {
  background-color: #2563eb; /* blue-600 */
}

.actionButtonSpell {
  background-color: #7c3aed; /* violet-600 */
  color: white;
}

.actionButtonSpell:hover:not(:disabled) {
  background-color: #6d28d9; /* violet-700 */
}

.actionButtonAbility {
  background-color: #ea580c; /* orange-600 */
  color: white;
}

.actionButtonAbility:hover:not(:disabled) {
  background-color: #c2410c; /* orange-700 */
}

.actionButtonSecond_wind,
.actionButtonAction_surge,
.actionButtonRage,
.actionButtonReckless_attack,
.actionButtonCunning_action {
  background-color: #059669; /* emerald-600 */
  color: white;
}

.actionButtonSecond_wind:hover:not(:disabled),
.actionButtonAction_surge:hover:not(:disabled),
.actionButtonRage:hover:not(:disabled),
.actionButtonReckless_attack:hover:not(:disabled),
.actionButtonCunning_action:hover:not(:disabled) {
  background-color: #047857; /* emerald-700 */
}

.actionButtonBackpack {
  background-color: #64748b; /* slate-500 */
  color: white;
}

.actionButtonBackpack:hover:not(:disabled) {
  background-color: #475569; /* slate-600 */
}

/* Responsive design */
@media (max-width: 768px) {
  .dynamicActionButtons {
    justify-content: center;
  }

  .dynamicActionButton {
    flex: 1 1 calc(50% - 6px);
    justify-content: center;
    min-width: 120px;
    /* Ensure minimum touch target size (44x44px) for mobile accessibility */
    min-height: 44px;
    padding: 12px 16px;
  }
}

/* ===================================== */
/* Combat History Sidebar */
/* ===================================== */

.combatHistorySidebar {
  display: flex;
  flex-direction: column;
  min-height: 200px;
  max-height: 400px;
  background-color: #1e293b; /* slate-800 fallback */
  background-color: var(--bg-secondary, #1e293b);
  border-radius: 8px;
  border: 1px solid #475569; /* slate-600 fallback */
  border: 1px solid var(--border-color, #475569);
  overflow: hidden;
}

/* Sidebar Header */
.sidebarHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 16px;
  background-color: #334155; /* slate-700 fallback */
  background-color: var(--bg-tertiary, #334155);
  border-bottom: 1px solid #475569; /* slate-600 fallback */
  border-bottom: 1px solid var(--border-color, #475569);
  flex-shrink: 0;
}

.sidebarTitle {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 1rem;
  font-weight: 700;
  color: #f1f5f9; /* slate-100 fallback */
  color: var(--text-primary, #f1f5f9);
  margin: 0;
}

.sidebarIcon {
  font-size: 1.25rem;
  line-height: 1;
  filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.4));
}

.sidebarRound {
  font-size: 0.75rem;
  font-weight: 600;
  padding: 4px 8px;
  border-radius: 4px;
  background-color: #3b82f6; /* blue-500 fallback */
  background-color: var(--accent-primary, #3b82f6);
  color: white;
}

/* Sidebar Content - Scrollable */
.sidebarContent {
  flex: 1;
  overflow-y: auto;
  padding: 12px;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

/* Scrollbar styling */
.sidebarContent::-webkit-scrollbar {
  width: 8px;
}

.sidebarContent::-webkit-scrollbar-track {
  background-color: #1e293b; /* slate-800 */
  border-radius: 4px;
}

.sidebarContent::-webkit-scrollbar-thumb {
  background-color: #475569; /* slate-600 */
  border-radius: 4px;
}

.sidebarContent::-webkit-scrollbar-thumb:hover {
  background-color: #64748b; /* slate-500 */
}

/* Empty State */
.emptyMessage {
  text-align: center;
  padding: 32px 16px;
  color: #94a3b8; /* slate-400 fallback */
  color: var(--text-muted, #94a3b8);
  font-size: 0.875rem;
  font-style: italic;
}

/* Log Entry */
.logEntry {
  display: flex;
  flex-direction: column;
  gap: 6px;
  padding: 10px 12px;
  background-color: #334155; /* slate-700 fallback */
  background-color: var(--bg-tertiary, #334155);
  border-radius: 6px;
  border-left: 3px solid transparent;
  transition: all 0.2s ease;
}

.logEntry:hover {
  background-color: #475569; /* slate-600 */
  border-left-color: #3b82f6; /* blue-500 */
}

/* Log Entry Header */
.logEntryHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.logAction {
  font-size: 0.875rem;
  font-weight: 600;
  color: #f1f5f9; /* slate-100 fallback */
  color: var(--text-primary, #f1f5f9);
}

.logMeta {
  display: flex;
  align-items: center;
  gap: 8px;
}

.logRound {
  font-size: 0.75rem;
  font-weight: 500;
  color: #94a3b8; /* slate-400 fallback */
  color: var(--text-muted, #94a3b8);
}

.logTypeIcon {
  font-size: 1rem;
  line-height: 1;
  filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.4));
}

/* Action type colors */
.logType_move {
  color: #3b82f6; /* blue-500 */
}

.logType_attack {
  color: #dc2626; /* red-600 */
}

.logType_spell {
  color: #7c3aed; /* violet-600 */
}

.logType_endTurn {
  color: #94a3b8; /* slate-400 */
}

.logType_damage {
  color: #ea580c; /* orange-600 */
}

.logType_heal {
  color: #10b981; /* emerald-500 */
}

/* Log Description */
.logDescription {
  font-size: 0.75rem;
  color: #cbd5e1; /* slate-300 */
  line-height: 1.4;
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 6px;
}

/* Inline Dice Rolls Container */
.diceRollsInline {
  display: inline-flex;
  gap: 4px;
  align-items: center;
}

/* Individual Inline Dice Roll */
.diceRollInline {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 20px;
  height: 18px;
  padding: 0 4px;
  border-radius: 3px;
  font-size: 0.75rem;
  font-weight: 700;
  background-color: #475569; /* slate-600 */
  color: #f1f5f9; /* slate-100 */
}

/* Log Target */
.logTarget {
  color: #94a3b8; /* slate-400 */
  font-weight: 500;
}

/* Log Damage Display */
.logDamage {
  display: inline-flex;
  align-items: center;
  gap: 2px;
  padding: 2px 6px;
  border-radius: 3px;
  font-weight: 600;
  background-color: #7f1d1d; /* red-900 */
  color: #fca5a5; /* red-300 */
  font-size: 0.6875rem;
}

/* Dice Rolls Container */
.diceRollsContainer {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  margin-top: 4px;
}

/* Dice Roll Display */
.diceRoll {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 32px;
  height: 28px;
  padding: 0 8px;
  border-radius: 4px;
  font-size: 0.875rem;
  font-weight: 700;
  background-color: #475569; /* slate-600 - default */
  color: #f1f5f9; /* slate-100 */
  border: 2px solid transparent;
  transition: all 0.2s ease;
  cursor: help;
}

.diceRoll:hover {
  transform: translateY(-1px);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

/* Natural 1 - Critical Failure (Red) */
.diceRollNatural1 {
  background-color: #7f1d1d; /* red-900 */
  color: #fca5a5; /* red-300 */
  border-color: #dc2626; /* red-600 */
  box-shadow: 0 0 12px rgba(220, 38, 38, 0.4);
  animation: pulse-red 2s infinite;
}

/* Natural 20 / Critical Hit (Gold) */
.diceRollCritical {
  background-color: #78350f; /* amber-900 */
  color: #fcd34d; /* amber-300 */
  border-color: #f59e0b; /* amber-500 */
  box-shadow: 0 0 12px rgba(245, 158, 11, 0.4);
  animation: pulse-gold 2s infinite;
}

/* Pulse animations for dramatic effect */
@keyframes pulse-red {
  0%,
  100% {
    box-shadow: 0 0 12px rgba(220, 38, 38, 0.4);
  }
  50% {
    box-shadow: 0 0 20px rgba(220, 38, 38, 0.6);
  }
}

@keyframes pulse-gold {
  0%,
  100% {
    box-shadow: 0 0 12px rgba(245, 158, 11, 0.4);
  }
  50% {
    box-shadow: 0 0 20px rgba(245, 158, 11, 0.6);
  }
}

/* ===================================== */
/* Combat Log Redesign - Attack Entries  */
/* ===================================== */

/* Clickable entry styling */
.logEntryClickable {
  cursor: pointer;
  user-select: none;
}

.logEntryClickable:hover {
  background-color: #475569; /* slate-600 */
}

.logEntryExpanded {
  background-color: #3f4f63; /* slightly lighter */
  border-left-color: #60a5fa; /* blue-400 */
}

/* Entry header with left/right sections */
.logEntryHeaderLeft {
  display: flex;
  align-items: center;
  gap: 6px;
}

.logRoundFull {
  font-size: 0.6875rem;
  font-weight: 500;
  color: #64748b; /* slate-500 */
}

/* Attack content container */
.logAttackContent {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

/* Attack line with formula */
.logAttackLine {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 6px;
  font-size: 0.75rem;
  color: #cbd5e1; /* slate-300 */
}

/* Attack roll section: 19 +5 = 24 */
.logAttackRoll {
  display: inline-flex;
  align-items: center;
  gap: 2px;
  font-family: 'Monaco', 'Consolas', monospace;
}

.logModifier {
  color: #94a3b8; /* slate-400 */
}

.logEquals {
  color: #e2e8f0; /* slate-200 */
  font-weight: 600;
}

/* Target with AC */
.logTargetWithAc {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  color: #94a3b8; /* slate-400 */
}

.logAc {
  font-size: 0.6875rem;
  color: #64748b; /* slate-500 */
}

/* Damage formula: üî®5 +üí™3 +‚öîÔ∏è2 = 10 bludg. */
.logDamageFormula {
  display: inline-flex;
  align-items: center;
  gap: 2px;
  margin-left: auto;
  padding-left: 8px;
}

.logDamagePart {
  display: inline-flex;
  align-items: center;
}

.logPlus {
  color: #64748b; /* slate-500 */
  margin: 0 1px;
}

.logSourceIcon {
  font-size: 0.75rem;
}

.logSourceValue {
  font-family: 'Monaco', 'Consolas', monospace;
  font-size: 0.6875rem;
  color: #e2e8f0; /* slate-200 */
}

.logDamageTotal {
  margin-left: 4px;
  padding: 1px 4px;
  border-radius: 3px;
  background-color: #7f1d1d; /* red-900 */
  color: #fca5a5; /* red-300 */
  font-weight: 600;
  font-size: 0.6875rem;
}

/* Expanded breakdown section */
.logExpandedBreakdown {
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding-top: 4px;
}

.logBreakdownDivider {
  height: 1px;
  background: linear-gradient(
    to right,
    transparent,
    #475569 20%,
    #475569 80%,
    transparent
  );
  margin: 2px 0;
}

.logBreakdownRow {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 2px 4px;
  font-size: 0.75rem;
}

.logBreakdownIcon {
  width: 20px;
  text-align: center;
}

.logBreakdownName {
  flex: 1;
  color: #cbd5e1; /* slate-300 */
}

.logBreakdownValue {
  font-family: 'Monaco', 'Consolas', monospace;
  color: #e2e8f0; /* slate-200 */
  text-align: right;
  min-width: 40px;
}

.logBreakdownTotal {
  font-weight: 700;
  color: #fca5a5; /* red-300 */
  text-align: right;
  padding: 2px 4px;
}

/* Responsive - Stack differently on mobile */
@media (max-width: 768px) {
  .combatHistorySidebar {
    /* On mobile, might be full-width or collapsed */
    min-height: 150px;
    max-height: 300px;
  }

  .sidebarContent {
    padding: 8px;
    gap: 8px;
  }

  .logEntry {
    padding: 8px 10px;
  }
}

/* ===================================== */
/* Combat Panel - Main Composition */
/* ===================================== */

.combatPanel {
  /* Fixed positioning - anchor to bottom of viewport */
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: 2500; /* Above game content, below modals */

  /* Styling */
  background-color: #0f172a; /* slate-900 */
  border-top: 1px solid #334155; /* slate-700 */
  box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.3);

  /* Interaction */
  pointer-events: auto;
}

/* Main panel content - single horizontal row */
.combatPanelContent {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 8px 16px;
  max-width: 1600px;
  margin: 0 auto;
  flex-wrap: wrap;
}

/* Turn badge - compact indicator */
.turnBadge {
  padding: 6px 12px;
  border-radius: 4px;
  font-size: 0.75rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  white-space: nowrap;
  flex-shrink: 0;
}

/* Divider between sections */
.panelDivider {
  width: 1px;
  height: 28px;
  background-color: #475569; /* slate-600 */
  flex-shrink: 0;
}

/* Floating hover panel - bottom left, above panel */
.floatingHoverPanel {
  position: absolute;
  bottom: 100%;
  left: 16px;
  margin-bottom: 8px;
  z-index: 2600;
}

/* Floating combat log - right side, over the map */
.floatingCombatLog {
  position: absolute;
  bottom: 100%;
  right: 16px;
  margin-bottom: 8px;
  width: 320px;
  max-height: 400px; /* Increased height for more log entries */
  z-index: 2550;
  /* Let the inner sidebar handle scrolling */
  overflow: visible;
}

/* Action button group */
.actionButtonGroup {
  display: flex;
  align-items: center;
  gap: 6px;
  flex-shrink: 0;
}

/* Unified action button style */
.actionBtn {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 6px 12px;
  border-radius: 4px;
  font-size: 0.75rem;
  font-weight: 600;
  border: none;
  cursor: pointer;
  transition: all 0.15s ease;
  white-space: nowrap;
  background-color: #334155; /* slate-700 */
  color: #f1f5f9; /* slate-100 */
}

.actionBtn:hover:not(:disabled) {
  background-color: #475569; /* slate-600 */
}

.actionBtn:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

.actionBtnAttack {
  background-color: #dc2626; /* red-600 */
}
.actionBtnAttack:hover:not(:disabled) {
  background-color: #b91c1c; /* red-700 */
}

.actionBtnMove {
  background-color: #3b82f6; /* blue-500 */
}
.actionBtnMove:hover:not(:disabled) {
  background-color: #2563eb; /* blue-600 */
}

.actionBtnEndTurn {
  background-color: #16a34a; /* green-600 */
}
.actionBtnEndTurn:hover:not(:disabled) {
  background-color: #15803d; /* green-700 */
}

/* Responsive */
@media (max-width: 1024px) {
  .combatPanelContent {
    gap: 10px;
    padding: 8px 12px;
  }

  .floatingCombatLog {
    width: 280px;
  }
}

@media (max-width: 768px) {
  .combatPanelContent {
    gap: 8px;
    padding: 8px;
  }
}

/* ============================================
 * Hover Info Panel
 * Shows entity info when hovering on hex grid
 * ============================================ */

.hoverInfoPanel {
  /* Layout - let grid control width */
  padding: 12px;
  height: fit-content;

  /* Background */
  background-color: var(--bg-tertiary, #0f172a);
  border-radius: 8px;

  /* Border - colored by entity type */
  border: 2px solid var(--border-color, #475569);

  /* Transition for border color changes */
  transition: border-color 0.2s ease;
}

/* Ally border (blue/cyan) */
.hoverInfoAlly {
  border-color: #22d3ee; /* cyan-400 */
  box-shadow: 0 0 8px rgba(34, 211, 238, 0.3);
}

/* Enemy border (red) */
.hoverInfoEnemy {
  border-color: #ef4444; /* red-500 */
  box-shadow: 0 0 8px rgba(239, 68, 68, 0.3);
}

.hoverInfoContent {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.hoverInfoName {
  font-size: 14px;
  font-weight: 600;
  color: var(--text-primary, #f1f5f9);
  line-height: 1.2;
}

.hoverInfoSubtext {
  font-size: 12px;
  color: var(--text-muted, #94a3b8);
}

.hoverInfoStats {
  display: flex;
  gap: 12px;
  margin-top: 4px;
  font-size: 13px;
}

.hoverInfoHp {
  color: #4ade80; /* green-400 */
  font-weight: 500;
}

.hoverInfoAc {
  color: #60a5fa; /* blue-400 */
  font-weight: 500;
}

.hoverInfoConditions {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  margin-top: 6px;
}

.hoverInfoCondition {
  font-size: 11px;
  padding: 2px 6px;
  border-radius: 4px;
  background-color: rgba(251, 191, 36, 0.2); /* amber with transparency */
  border: 1px solid rgba(251, 191, 36, 0.5);
  color: #fcd34d; /* amber-300 */
}

.hoverInfoSection {
  margin-top: 6px;
}

.hoverInfoPlaceholder {
  font-size: 12px;
  color: var(--text-muted, #94a3b8);
  font-style: italic;
}

/* ============================================
 * Available Actions Display
 * Shows available combat abilities and actions
 * ============================================ */

.availableActionsContainer {
  display: flex;
  flex-direction: column;
  gap: 8px;
  padding: 8px 12px;
  background-color: var(--bg-tertiary, #334155);
  border-radius: 6px;
  border: 1px solid var(--border-color, #475569);
}

/* ============================================
 * Combat Abilities Panel
 * Data-driven display of base combat abilities
 * ============================================ */

.combatAbilitiesPanel {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.abilitySection {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.abilitySectionHeader {
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--text-muted, #94a3b8);
  font-weight: 600;
}

.abilityGrid {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
}

.abilityBtn {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 11px;
  border: 1px solid;
  cursor: pointer;
  transition: all 0.15s ease;
}

.abilityBtn:disabled {
  cursor: not-allowed;
  opacity: 0.5;
}

.abilityBtnAvailable {
  background-color: rgba(34, 197, 94, 0.15);
  border-color: rgba(34, 197, 94, 0.5);
  color: #86efac;
}

.abilityBtnAvailable:hover:not(:disabled) {
  background-color: rgba(34, 197, 94, 0.3);
  transform: translateY(-1px);
}

.abilityBtnUnavailable {
  background-color: rgba(100, 100, 100, 0.1);
  border-color: rgba(100, 100, 100, 0.3);
  color: #666;
}

.abilityBtnStrike {
  background-color: rgba(239, 68, 68, 0.2);
  border-color: rgba(239, 68, 68, 0.5);
  color: #fca5a5;
}

.abilityBtnStrike:hover:not(:disabled) {
  background-color: rgba(239, 68, 68, 0.35);
  transform: translateY(-1px);
}

.abilityIcon {
  font-size: 12px;
}

.abilityName {
  font-weight: 500;
}

/* ============================================
 * Features List Panel
 * Raw display of character features
 * ============================================ */

.featuresListPanel {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.featuresSectionHeader {
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--text-muted, #94a3b8);
  font-weight: 600;
}

.featuresList {
  display: flex;
  flex-direction: column;
  gap: 3px;
}

.featureItem {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 3px 6px;
  border-radius: 4px;
  font-size: 11px;
  background-color: rgba(100, 100, 100, 0.1);
  border: 1px solid rgba(100, 100, 100, 0.2);
  color: var(--text-primary, #e2e8f0);
  cursor: pointer;
  transition: all 0.15s ease;
  text-align: left;
}

.featureItem:hover:not(:disabled) {
  background-color: rgba(100, 100, 100, 0.2);
}

.featureItem:disabled {
  cursor: default;
}

.featureItemActive {
  background-color: rgba(34, 197, 94, 0.2);
  border-color: rgba(34, 197, 94, 0.5);
}

.featureItemPassive {
  cursor: default;
  opacity: 0.8;
}

.featureActionType {
  font-size: 9px;
  padding: 1px 4px;
  border-radius: 3px;
  color: white;
  font-weight: 600;
  text-transform: uppercase;
  flex-shrink: 0;
}

.featureName {
  flex: 1;
}

.featureActiveIndicator {
  color: #4ade80;
  font-weight: bold;
}

.emptyFeatures {
  font-size: 11px;
  color: var(--text-muted, #94a3b8);
  font-style: italic;
}
