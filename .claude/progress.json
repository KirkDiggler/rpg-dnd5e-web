{
  "branch": "feature/type-safe-damage-sources",
  "issues": ["#231"],
  "goal": "Implement React components to display type-safe SourceRef damage sources using proto enums (ConditionId, FeatureId, Spell) from v0.1.55",
  "context": {
    "proto_version": "v0.1.55",
    "design_doc": "https://github.com/KirkDiggler/rpg-toolkit/blob/main/docs/ideas/type-safe-refs/design-web.md",
    "existing_files": {
      "damageSourceIcons.ts": "Old string-based approach - needs replacement with enum-based",
      "conditionIcons.ts": "Condition display info - can be extended for ConditionId enum"
    },
    "sourceref_structure": {
      "weapon": "Weapon enum - longsword, warhammer, etc.",
      "ability": "Ability enum - STR, DEX, etc.",
      "condition": "ConditionId enum - RAGING, BRUTAL_CRITICAL, SNEAK_ATTACK, etc.",
      "feature": "FeatureId enum - BREATH_WEAPON, RADIANCE_OF_DAWN, etc.",
      "spell": "Spell enum - existing spell definitions"
    }
  },
  "sessions": [],
  "next_steps": [
    "Task 1: Update package.json to use @kirkdiggler/rpg-api-protos v0.1.55",
    "Task 2: Create enum display maps (src/utils/enumDisplays.ts) - WEAPON_DISPLAY, ABILITY_DISPLAY, CONDITION_DISPLAY, FEATURE_DISPLAY",
    "Task 3: Create WeaponDisplay component",
    "Task 4: Create AbilityDisplay component",
    "Task 5: Create ConditionDisplay component (extend existing conditionIcons.ts)",
    "Task 6: Create FeatureDisplay component",
    "Task 7: Create SpellDisplay component",
    "Task 8: Create DamageSourceBadge component (handles SourceRef oneof)",
    "Task 9: Create DamageBreakdown component for combat UI",
    "Task 10: Integrate with existing CombatHistorySidebar",
    "Task 11: Update damageSourceIcons.ts to use new enum-based approach or deprecate"
  ]
}
